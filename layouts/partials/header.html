<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ .Title }} | {{ .Site.Title }}</title>
    <link rel="stylesheet" href="{{ "/css/style.css" | relURL }}" />
    <link rel="stylesheet" href="{{ "/css/fonts.css" | relURL }}" />
    {{ partial "head_custom.html" . }}
    {{ if .IsTranslated }}
    {{ range .Translations }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
    {{ end }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
    {{ end }}
  </head>

  <body>
    <nav>
    <div class="nav-bar">
      <ul class="menu">
        {{ range .Site.Menus.main }}
        <li><a href="{{ .URL | relLangURL }}">{{ .Name }}</a></li>
        {{ end }}
      </ul>
      <div class="lang-switch">
        {{ range $.Site.Languages }}
          {{- $isCurrent := eq .Lang $.Site.Language.Lang -}}
          {{- $langLabel := .LanguageName -}}
          {{- if $isCurrent -}}
            <span class="lang-current">{{ $langLabel }}</span>
          {{- else -}}
            {{- /* Link to the translated page if it exists, otherwise to the language homepage */ -}}
            {{- $lang := .Lang -}}
            {{- $targetURL := (printf "/%s/" $lang) | absURL -}}
            {{- if $.IsTranslated -}}
              {{- range $.Translations -}}
                {{- if eq .Language.Lang $lang -}}
                  {{- $targetURL = .Permalink -}}
                {{- end -}}
              {{- end -}}
            {{- end -}}
            <a href="{{ $targetURL }}">{{ $langLabel }}</a>
          {{- end -}}
        {{ end }}
      </div>
    </div>
    <hr/>
    </nav>
